# Лабораторная 3

## Отрабатываемый материал

Основные концепции ООП, SOLID, структурные паттерны, порождающие паттерны

## Цель

Отработать реализацию порождающих паттернов вместе со структурными паттернами и ранее изученным материалом.

## Задание

- Реализовать объектную модель симулятора сражений фэнтези-существ, используя на практике отрабатываемый теоретический
  материал
- Покрыть полученное решение модульными и функциональными тестами

## Формулировка

Вы реализовываете логическое ядро некоторой игры, отвечающее за механизмы конфигурации существ и боёвки между ними.

Боёвка подразумевает противостояние двух **игроков**, а точнее существ на их **столах**. Существа имеют показатели
**атаки** и **здоровья**. Во время боя, существа игроков по очереди атакуют случайное существо оппонента. Атаковать, как
и быть атакованным могут только существа с положительным показателем здоровья. Атаковать могут только существа с
положительным показателем атаки.

Существа могут иметь **модификаторы**, влияющие на то, как они выполняют атаку или получение урона. Также,
**конкретные существа** имеют различные **способности**, которые также могут влиять на то как происходят процессы атаки
и получения урона.

Когда существо атакует существо противника, оно не получает урона от противника.

Показатели атаки и здоровья далее могут быть записаны с помощью нотации `(x/y)`, где `x` – показатель атаки, а `y` –
показатель здоровья. Существо, имеющее показатели (1/2) имеет показатель атаки равный 1 и показатель здоровья равный 2.

## Функциональные требования

### Существо

- Имеет показатель атаки (целочисленный)
- Имеет показатель здоровья (целочисленный)
- Может атаковать другое существо
- Может принять урон
- Позволяет изменить показатели атаки и здоровья

Существуют различные конкретные существа, имеющие способности, по-разному влияющие на то как эти существа выполняют
операции атаки и получения урона.

Существ стоит рассматривать в нескольких различных разрезах:

#### Существа во время боя

Во время боя существа могут менять свои характеристики (атаку и здоровье), что влияет на исход боя. Эти изменения
сохраняются только во время боя, по его завершении, характеристики существ на столе игрока должны остаться неизменными.

#### Существа на столе игрока

Существа на столе игрока также могут менять свои характеристики, эти изменения применяются только для существ на столе
конкретного игрока, они не должны никак влиять на существ на столах других игроков, а также на существ в каталоге
существ.

#### Существа в каталоге существ

Существа "в каталоге" могут быть добавлены на стол игрока, после этого, изменения характеристик существ на столе никак
не
влияют на изменения существ "в каталоге".

### Каталог существ

Каталог существ представлен набором объектов, позволяющих создать какое-то предварительно настроенное существо.
Реализация каталога существ предполагает возможность конфигурировать их характеристики и имеющиеся модификаторы.

### Модификаторы

Модификаторы добавляют какие-то дополнительные поведения к существам. Они могут влиять на то, как происходят операции
атаки и получения урона.

На существо могут быть наложено несколько модификаторов, включая несколько модификаторов одного типа, их эффекты должны
комбинироваться.

#### Магический щит

Магический щит позволяет существу однократно избежать получения любого урона. После получения урона в первый раз,
магический щит отключается, существо, имеющее магический щит будет получать дальнейший урон в полном объёме.

#### Мастерство атаки

Мастерство атаки позволяет существу провести атаку дважды, если после первой атаки существо осталось с положительным
показателем здоровья.

Если после первой атаки существо погибло, то данный модификатор не имеет эффекта.

### Заклинания

Заклинания позволяют применять навсегда какие-то улучшения к существам на столе игрока.

- Зелье силы: увеличивает показатель атаки существа на 5 единиц
- Зелье выносливости: увеличивает показатель здоровья существа на 5 единиц
- Амулет защиты: применяет к существу Магический щит
- Волшебное зеркало: меняет местами показатели атаки и здоровья у существа

### Столы игроков

- Столы игроков содержат существ
- На стол игрока можно добавить максимум 7 существ
- Действия происходящие с существами на столе никак не должны отражаться на существах из каталога, аналогично с
  существами в бою и существами на столе.
- Столы должны реализовывать операцию получения атакующих и атакуемых существ

### Бой

Сущность боя реализует функционал проведения боя между двумя столами игроков. Бой по очереди выбирает атакующее и
атакуемое существо, чередуя то у какого из двух игроков выбираются эти существа (игроки атакуют по очереди).

Бой может иметь два исхода: победа одного из игроков, ничья.

В случае, когда у игрока нашлось атакующее существо, а у оппонента не нашлось атакуемого – игроку засчитывается победа.
Если у игрока не нашлось атакующего существа, игрок пропускает ход, ход переходит к оппоненту. Если у игрока не нашлось
атакующего существа, а у оппонента не нашлось атакуемого сущетсва – игрокам засчитывается ничья.

### Конкретные существа

#### Боевой аналитик

Боевой аналитик применяет свои навыки для определения стратегий и слабых мест противника. Перед тем как атаковать
существо противника, он увеличивает свой показатель атаки на 2 до конца боя. Изначально имеет показатели (2/4).

#### Злобный боец

Атака от других существ делает бойца только сильнее. Когда он получает не смертельный урон, он удваивает свой показатель
атаки до конца боя. Изначально имеет показатели (1/6).

#### Сундук-мимик

Неординарные способности мимика, позволяют ему копировать его противников. Когда он атакует другое существо, показатели
атаки и здоровья мимика становятся равны максимальным значениям между его показателями и показателями его соперника.
Изначально имеет показатели (1/1).

Если мимик с показателями (1/10) атакует существо с показателями (5/2), то перед совершением атаки, показатели мимика
становятся равны (5/10).

#### Бессмертный Ужас

Что уже мертво – убить нельзя... как минимум один раз. Один раз за бой, когда Ужас получат смертельный урон, он
перерождается, сохраняя показатели атаки, но имея показатель здоровья равный 1. Изначально имеет показатели (4/4).

#### Мастер амулетов

Отточенные навыки боя и владение магическими артефактами делают Мастера амулетов грозным соперником. Он сразу обладает
модификаторами "Магический щит" и "Мастерство атаки". Изначально имеет показатели (5/2).

## Нефункциональные требования

- Реализация должна следовать основным концепциям ООП
- В реализации должны быть использованы порождающие и структурные паттерны
- Реализация должна поддерживать добавление новых модификаторов без нарушения OCP
- Реализация должна поддерживать добавление новых заклинаний без нарушения OCP
- Конфигурация и создание существ должны быть инкапсулированы в отдельных типах.
- Конфигурация и создание разных типов существ должны иметь общую абстракцию для разных типов существ.
- Должна быть возможность применить любой модификатор к любому существу в любой момент времени
- Конкретные существа не должны знать о модификаторах
- Реализации существ, подразумевающих наличие модификаторов также не должны знать о наличии модификаторов
- Конфигурация существ, подразумевающих модификаторы, должна инкапсулировать их применение
- Конфигурация существа должна оставлять возможность дальнейшей его донастройки
- Модификаторы не должны иметь отдельной абстракции
- Должна быть реализована абстракция, применяющая модификатор к сущности

## Тестирование

Полученное решение должно быть покрыто модульными и функциональными тестами.

Сценарии тестирования необходимо разработать самостоятельно, полнота тестирования определяется наличием тестов на
функционал отдельных модулей, а также наличием тестов на основные сценарии использования объектной модели.

---
